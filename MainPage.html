<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="MainPage.css"/>
    </head>

    <body>
        <header>
            <img class = "logo" src = "images/icons8-enclume-100.png" alt = "Picture of an enclume with a hammer on it, its the logo of the entreprise">
            <h1>Asset forge</h1>
            <div class = "link">
                <a class = "headerLink" href = "ThemePage.html"> Gallery</a>
                <a class = "headerLink" href = "GamePage.html"> Jeux</a>
                <a class = "headerLink" href = "AboutUs.html"> About us</a>
            </div>
        </header>

        <main>
            <h1>AssetForge</h1>
            <input class ="Refresh" type="button" value="Refresh"/>
            <div id ="mosaïque"> 
            
            </div>  
        </main>


        <footer>
            <img class = "logo" src = "images/icons8-enclume-100.png" alt = "Picture of an enclume with a hammer on it, its the logo of the entreprise">
            <h1> ASSET FORGE</h1>
            <a class = "headerLink" href = "AboutUs.html"> About us</a>
        </footer>

        <script>


        const button = document.querySelector("input");
        const paragraph = document.querySelector("p");
      

        button.addEventListener("click",refreshText)

        function refreshText()
        {
            
                CleanText();
                displayJokes();
            
        }

        function CleanText()
        {
            document.getElementById("mosaïque").innerHTML = "";
        }

        function addJokeToMosaik(setup, delivery) {
            var newDiv = document.createElement("div");

            var newContent = document.createTextNode(setup + "\n" + delivery + "\n");
            
            newDiv.appendChild(newContent);
            
            var currentDiv = document.getElementById("mosaïque");

            currentDiv.appendChild(newDiv);
        }

        function displayOneJoke() {
            // fetch + appel addJokeToMosaik
            console.log("Im in code");
            fetch("https://v2.jokeapi.dev/joke/Any?lang=fr")
                .then(rep => rep.json())
                .then(joke => 
                {
                    addJokeToMosaik(joke.setup,joke.delivery);
                })
         
        }

        function displayJokes()
        {
            for(var i = 0 ; i < 10; i++)
            {
                displayOneJoke();
            }
        }
        document.body.onload = displayOneJoke;
        displayJokes();
        </script>

    </body>

</html>